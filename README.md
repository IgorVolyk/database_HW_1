# database_HW_1
# "Нормализация БД транзакций до 3НФ"
## Почему исходная таблица не соответствовала нормальным формам:

#### Нарушение 1НФ:
Исходная таблица содержала повторяющиеся группы данных - информация о продуктах (бренд, категория, цена) дублировалась для каждой транзакции. На 20 000 строк всего 101 уникальный product_id создавал сильную избыточность.

#### Нарушение 2НФ:
Были частичные зависимости - атрибуты товара (бренд, продуктовая линейка, класс) зависели только от product_id, а не от полного первичного ключа (transaction_id + product_id). Более того, один product_id мог относиться к разным брендам, что нарушало саму концепцию уникального идентификатора.

#### Нарушение 3НФ:
Наблюдались транзитивные зависимости - например, стандартная стоимость могла вычисляться на основе бренда и класса продукта, а не напрямую от конкретного товара.

#### Почему мы выбрали такую структуру:

##### Решение для 1НФ:
Разделили данные на логические сущности: продукты, транзакции, позиции заказов

##### Решение для 2НФ:
Вынесли информацию о продуктах в отдельную таблицу products с гарантированно уникальными идентификаторами

##### Решение для 3НФ:
Убрали транзитивные зависимости, создав отдельную таблицу для хранения цен на момент транзакции

#### Объяснение ключевых решений:

**product_sku SERIAL:**
Создали автоматически генерируемый уникальный идентификатор, потому что исходный product_id был ненадежным - один product_id мог относиться к разным комбинациям бренда, продуктовой линейки, класса и размера. SERIAL гарантирует настоящую уникальность для каждой уникальной комбинации характеристик товара.

**order_item_id SERIAL:**
Использовали суррогатный ключ для таблицы связи, чтобы:
- Упростить связи между таблицами через единый идентификатор
- Обеспечить уникальность каждой позиции заказа  
- Сохранить исторические цены на момент транзакции (что критично для финансовой отчетности)

#### Преимущества нашей структуры:
- Устранена избыточность данных - информация о продуктах хранится один раз
- Улучшена целостность - исключены противоречивые данные через внешние ключи
- Гибкость - легко добавлять новые товары и транзакции без дублирования
- Историческая точность - цены хранятся на момент продажи, а не текущие цены товаров

#### Итог:
Мы преобразовали "плоскую" таблицу со смешанными данными в реляционную структуру 3НФ, где каждая сущность отвечает за свою зону ответственности, что обеспечивает целостность данных и упрощает дальнейшее сопровождение базы.
