# "Нормализация БД транзакций до 3НФ"
## Почему исходная таблица не соответствовала нормальным формам.

#### Нарушение 1НФ:
Исходная таблица содержала повторяющиеся группы данных - информация о продуктах (бренд, категория, цена) дублировалась для каждой транзакции. На 20 000 строк было всего 101 уникальных product_id, это создавало сильную избыточность.

#### Нарушение 2НФ:
Были частичные зависимости - атрибуты товара (продуктовая линейка, класс, размер) зависели от product_id и бренда: у товаров не было какого-то внятно идентификатора. Более того, один product_id мог относиться к разным брендам, что нарушало саму концепцию уникального идентификатора.

#### Нарушение 3НФ:
Наблюдались транзитивные зависимости - например, стандартная стоимость могла зависеть от бренда и класса продукта, а не напрямую от конкретного товара.

#### Почему я выбрал такую структуру:

##### Решение для 1НФ:
Разделил данные на логические сущности: продукты, транзакции, данные заказа. 

##### Решение для 2НФ:
Вынес информацию о продуктах в отдельную таблицу products с гарантированно уникальными идентификаторами.

##### Решение для 3НФ:
Убрал транзитивные зависимости, создав отдельную таблицу для хранения цен на момент транзакции.

#### Детализация структуры клиентов (customer):
Для полноценной клиентской аналитики была создана нормализованная структура таблиц customers:
- **customers** - основная информация о клиенте (имя, фамилия, пол, дата рождения)
- **customer_job** - профессиональные данные (должность, отрасль деятельности)  
- **customer_financials** - финансовый профиль (сегмент благосостояния, наличие автомобиля, оценка имущества)
- **customer_addresses** - географические данные (адрес, регион, страна)

Такая структура позволяет:
- Сегментировать клиентов по финансовым признакам и отраслевой принадлежности.
- Анализировать покупную способность разных wealth_segment.
- Строить географические отчеты по регионам.

#### Объяснение ключевых решений:

**product_sku SERIAL:**
Создал автоматически генерируемый уникальный идентификатор, потому что исходный product_id был ненадежным - один product_id мог относиться к разным комбинациям бренда, продуктовой линейки, класса и размера. SERIAL гарантирует настоящую уникальность для каждой уникальной комбинации характеристик товара.

**order_item_id SERIAL:**
Использовал суррогатный ключ для таблицы связи, чтобы:
- Упростить связи между таблицами через единый идентификатор
- Обеспечить уникальность каждой позиции заказа  
- Сохранить исторические цены на момент транзакции.

#### Преимущества данной структуры:
- Устранена избыточность данных - информация о продуктах хранится один раз
- Улучшена целостность - исключены противоречивые данные через внешние ключи
- Гибкость - легко добавлять новые товары и транзакции без дублирования
- Историческая точность - цены хранятся на момент продажи, а не текущие цены товаров
- Расширенная аналитика - детализированные данные о клиентах позволяют строить сложные отчеты

#### Итог:
Я преобразовал "плоскую" таблицу со смешанными данными в реляционную структуру 3НФ, где каждая сущность отвечает за свою зону ответственности, что обеспечивает целостность данных и упрощает дальнейшее сопровождение базы. Добавление детализированной структуры клиентов открывает возможности для углубленной бизнес-аналитики и сегментации.
